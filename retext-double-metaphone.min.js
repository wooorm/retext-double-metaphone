!function(b,a){typeof exports==='object'&&typeof module!=='undefined'?module.exports=b():typeof define==='function'&&define.amd?define([],b):(typeof window!=='undefined'?a=window:typeof global!=='undefined'?a=global:typeof self!=='undefined'?a=self:a=this,a.retextDoubleMetaphone=b())}(function(){return function a(b,c,e){function f(d,k){if(!c[d]){if(!b[d]){var i=typeof require=='function'&&require;if(!k&&i)return i(d,!0);if(g)return g(d,!0);var j=new Error("Cannot find module '"+d+"'");throw j.code='MODULE_NOT_FOUND',j}var h=c[d]={exports:{}};b[d][0].call(h.exports,function(c){var a=b[d][1][c];return f(a?a:c)},h,h.exports,a,b,c,e)}return c[d].exports}var g=typeof require=='function'&&require;for(var d=0;d<e.length;d++)f(e[d]);return f}({1:[function(a,e,i){'use strict';function f(c){var a=c.data||{},e=d(c);a.phonetics=b(e),'stem'in a&&(a.stemmedPhonetics=b(a.stem)),c.data=a}function g(a){c(a,'WordNode',f)}function h(){return g}var b=a('double-metaphone'),c=a('unist-util-visit'),d=a('nlcst-to-string');e.exports=h},{'double-metaphone':2,'nlcst-to-string':3,'unist-util-visit':4}],2:[function(r,q,s){'use strict';function p(u){var r='',q='',p=0,A=u.length,y=A-1,z,B,x,s,v,t,w;u=String(u).toUpperCase()+'     ',z=g.test(u),B=h.test(u),w=u.split(''),i.test(u)&&p++,w[0]==='X'&&(r+='S',q+='S',p++);while(p<A){v=w[p-1],s=w[p+1],t=w[p+2];switch(w[p]){case'A':case'E':case'I':case'O':case'U':case'Y':case'À':case'Ê':case'É':case'É':p===0&&(r+='A',q+='A');p++;break;case'B':r+='P';q+='P';s==='B'&&p++;p++;break;case'Ç':r+='S';q+='S';p++;break;case'C':if(v==='A'&&s==='H'&&t!=='I'&&!a.test(w[p-2])&&(t!=='E'||(x=u.slice(p-2,p+4)&&(x==='BACHER'||x==='MACHER')))){r+='K',q+='K',p+=2;break}if(p===0&&u.slice(p+1,p+6)==='AESAR'){r+='S',q+='S',p+=2;break}if(u.slice(p+1,p+4)==='HIA'){r+='K',q+='K',p+=2;break}if(s==='H'){if(p>0&&t==='A'&&w[p+3]==='E'){r+='K',q+='X',p+=2;break}if(p===0&&j.test(u)){r+='K',q+='K',p+=2;break}B||b.test(u.slice(p-2,p+4))||t==='T'||t==='S'||(p===0||v==='A'||v==='E'||v==='O'||v==='U')&&l.test(t)?(r+='K',q+='K'):p===0?(r+='X',q+='X'):u.slice(0,2)==='MC'?(r+='K',q+='K'):(r+='X',q+='K'),p+=2;break}if(s==='Z'&&u.slice(p-2,p)!=='WI'){r+='S',q+='X',p+=2;break}if(u.slice(p+1,p+4)==='CIA'){r+='X',q+='X',p+=3;break}if(s==='C'&&!(p===1&&w[0]==='M'))if((t==='I'||t==='E'||t==='H')&&u.slice(p+2,p+4)!=='HU'){x=u.slice(p-1,p+4),p===1&&v==='A'||x==='UCCEE'||x==='UCCES'?(r+='KS',q+='KS'):(r+='X',q+='X'),p+=3;break}else{r+='K',q+='K',p+=2;break}if(s==='G'||s==='K'||s==='Q'){r+='K',q+='K',p+=2;break}if(s==='I'&&(t==='E'||t==='O')){r+='S',q+='X',p+=2;break}if(s==='I'||s==='E'||s==='Y'){r+='S',q+='S',p+=2;break}r+='K';q+='K';if(s===' '&&(t==='C'||t==='G'||t==='Q')){p+=3;break}p++;break;case'D':if(s==='G'){t==='E'||t==='I'||t==='Y'?(r+='J',q+='J',p+=3):(r+='TK',q+='TK',p+=2);break}if(s==='T'||s==='D'){r+='T',q+='T',p+=2;break}r+='T';q+='T';p++;break;case'F':s==='F'&&p++;p++;r+='F';q+='F';break;case'G':if(s==='H'){if(p>0&&!a.test(v)){r+='K',q+='K',p+=2;break}if(p===0){t==='I'?(r+='J',q+='J'):(r+='K',q+='K'),p+=2;break}if(x=w[p-2],x==='B'||x==='H'||x==='D'||(x=w[p-3],x==='B'||x==='H'||x==='D')||(x=w[p-4],x==='B'||x==='H')){p+=2;break}p>2&&v==='U'&&m.test(w[p-3])?(r+='F',q+='F'):p>0&&v!=='I'&&(r+='K',q+='K'),p+=2;break}if(s==='N'){p===1&&a.test(w[0])&&!z?(r+='KN',q+='N'):u.slice(p+2,p+4)!=='EY'&&u.slice(p+1)!=='Y'&&!z?(r+='N',q+='KN'):(r+='KN',q+='KN'),p+=2;break}if(u.slice(p+1,p+3)==='LI'&&!z){r+='KL',q+='L',p+=2;break}if(p===0&&n.test(u.slice(1,3))){r+='K',q+='J',p+=2;break}if(u.slice(p+1,p+3)==='ER'&&v!=='I'&&v!=='E'&&!o.test(u.slice(0,6))||s==='Y'&&!k.test(v)){r+='K',q+='J',p+=2;break}if(s==='E'||s==='I'||s==='Y'||(v==='A'||v==='O')&&s==='G'&&t==='I'){u.slice(p+1,p+3)==='ET'||B?(r+='K',q+='K'):u.slice(p+1,p+5)==='IER '?(r+='J',q+='J'):(r+='J',q+='K'),p+=2;break}s==='G'&&p++;p++;r+='K';q+='K';break;case'H':a.test(s)&&(p===0||a.test(v))&&(r+='H',q+='H',p++);p++;break;case'J':if(u.slice(p,p+4)==='JOSE'||u.slice(0,4)==='SAN '){u.slice(0,4)==='SAN '||p===0&&w[p+4]===' '?(r+='H',q+='H'):(r+='J',q+='H'),p++;break}p===0?(r+='J',q+='A'):!z&&(s==='A'||s==='O')&&a.test(v)?(r+='J',q+='H'):p===y?r+='J':v!=='S'&&v!=='K'&&v!=='L'&&!e.test(s)?(r+='J',q+='J'):s==='J'&&p++;p++;break;case'K':s==='K'&&p++;r+='K';q+='K';p++;break;case'L':if(s==='L'){if(p===A-3&&(v==='I'&&(t==='O'||t==='A')||v==='A'&&t==='E')||v==='A'&&t==='E'&&(w[y]==='A'||w[y]==='O'||d.test(u.slice(y-1,A)))){r+='L',p+=2;break}p++}r+='L';q+='L';p++;break;case'M':(s==='M'||v==='U'&&s==='B'&&(p+1===y||u.slice(p+2,p+4)==='ER'))&&p++;p++;r+='M';q+='M';break;case'N':s==='N'&&p++;p++;r+='N';q+='N';break;case'Ñ':p++;r+='N';q+='N';break;case'P':if(s==='H'){r+='F',q+='F',p+=2;break}x=s;(x==='P'||x==='B')&&p++;p++;r+='P';q+='P';break;case'Q':s==='Q'&&p++;p++;r+='K';q+='K';break;case'R':p===y&&!z&&v==='E'&&w[p-2]==='I'&&w[p-4]!=='M'&&w[p-3]!=='E'&&w[p-3]!=='A'?q+='R':(r+='R',q+='R');s==='R'&&p++;p++;break;case'S':if(s==='L'&&(v==='I'||v==='Y')){p++;break}if(p===0&&u.slice(1,5)==='UGAR'){r+='X',q+='S',p++;break}if(s==='H'){c.test(u.slice(p+1,p+5))?(r+='S',q+='S'):(r+='X',q+='X'),p+=2;break}if(s==='I'&&(t==='O'||t==='A')){z?(r+='S',q+='S'):(r+='S',q+='X'),p+=3;break}if(s==='Z'||p===0&&(s==='L'||s==='M'||s==='N'||s==='W')){r+='S',q+='X',s==='Z'&&p++,p++;break}if(s==='C'){if(t==='H'){if(x=u.slice(p+3,p+5),f.test(x)){x==='ER'||x==='EN'?(r+='X',q+='SK'):(r+='SK',q+='SK'),p+=3;break}p===0&&!a.test(w[3])&&w[3]!=='W'?(r+='X',q+='S'):(r+='X',q+='X'),p+=3;break}if(t==='I'||t==='E'||t==='Y'){r+='S',q+='S',p+=3;break}r+='SK',q+='SK',p+=3;break}x=u.slice(p-2,p);p===y&&(x==='AI'||x==='OI')?q+='S':(r+='S',q+='S');s==='S'&&p++;p++;break;case'T':if(s==='I'&&t==='O'&&w[p+3]==='N'){r+='X',q+='X',p+=3;break}x=u.slice(p+1,p+3);if(s==='I'&&t==='A'||s==='C'&&t==='H'){r+='X',q+='X',p+=3;break}if(s==='H'||s==='T'&&t==='H'){B||(t==='O'||t==='A')&&w[p+3]==='M'?(r+='T',q+='T'):(r+='0',q+='T'),p+=2;break}(s==='T'||s==='D')&&p++;p++;r+='T';q+='T';break;case'V':s==='V'&&p++;r+='F';q+='F';p++;break;case'W':if(s==='R'){r+='R',q+='R',p+=2;break}p===0&&(a.test(s)?(r+='A',q+='F'):s==='H'&&(r+='A',q+='A'));if((v==='E'||v==='O')&&s==='S'&&t==='K'&&(w[p+3]==='I'||w[p+3]==='Y')||u.slice(0,3)==='SCH'||p===y&&a.test(v)){q+='F',p++;break}if(s==='I'&&(t==='C'||t==='T')&&w[p+3]==='Z'){r+='TS',q+='FX',p+=4;break}p++;break;case'X':(p===y||v==='U'&&(w[p-2]==='A'||w[p-2]==='O'))&&(r+='KS',q+='KS');(s==='C'||s==='X')&&p++;p++;break;case'Z':if(s==='H'){r+='J',q+='J',p+=2;break}s==='Z'&&(t==='A'||t==='I'||t==='O')||z&&p>0&&v!=='T'?(r+='S',q+='TS'):(r+='S',q+='S');s==='Z'&&p++;p++;break;default:p++}}return[r,q]}var a,g,h,i,j,b,l,m,n,o,k,e,d,c,f;a=/[AEIOUY]/,g=/W|K|CZ|WITZ/,h=/^(VAN |VON |SCH)/,i=/^(GN|KN|PN|WR|PS)/,j=/^CH(IA|EM|OR([^E])|YM|ARAC|ARIS)/,b=/ORCHES|ARCHIT|ORCHID/,l=/[ BFHLMNRVW]/,m=/[CGLRT]/,n=/Y[\s\S]|E[BILPRSY]|I[BELN]/,o=/^[DMR]ANGER/,k=/[EGIR]/,e=/[LTKSNMBZ]/,d=/AS|OS/,c=/EIM|OEK|OLM|OLZ/,f=/E[DMNR]|UY|OO/,q.exports=p},{}],3:[function(c,b,d){'use strict';function a(d){var e,b,c;if(typeof d.value==='string')return d.value;if(c=d.children,b=c.length,b===1&&'value'in c[0])return c[0].value;e=[];while(b--)e[b]=a(c[b]);return e.join('')}b.exports=a},{}],4:[function(e,a,f){'use strict';function b(b,d){var a=-1,c=b.length;while(++a<c)if(d(b[a],a)===!1)return!1;return!0}function c(b,d){var a=b.length,c=-1;while(--a>c)if(d(b[a],a)===!1)return!1;return!0}function d(i,a,d,f){var g,e,h;typeof a==='function'&&(f=d,d=a,a=null),g=f?c:b,h=function(a,b){return g(a,function(a,c){return a&&e(a,c,b)})},e=function(b,c,f){var e;return c=c||(f?0:null),(!a||b.type===a)&&(e=d(b,c,f||null)),b.children&&e!==!1?h(b.children,b):e},e(i)}a.exports=d},{}]},{},[1])(1)})
